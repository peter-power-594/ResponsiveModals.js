/*! ResponsiveModals.jsÂ²
 *
 * @author Fork Copyright (c) 2023 @peter-power-594
 * @author Original Copyright (c) 2011-2023 @kylefox
 * @license Available under the MIT license
 */
!function(e,c){var p={};function n(o,e){for(var t,n,s=0,l=p.modals;s<l.length;s++)if(l[s]&&l[s].anchor&&l[s].anchor===o){t=l[s];break}if(!t){for(var a in(t=this).$body=c.body,t.options={},e=e||{},defaultOptions=p.defaultOptions)t.options[a]=(void 0!==e[a]?e:defaultOptions)[a];if(t.options.doFade=!isNaN(parseInt(t.options.fadeDuration,10)),t.$blocker=null,t.options.closeExisting)for(;p.isActive();)p.close();p.modals.push(t)}if(o&&o.tagName&&"A"===o.tagName.toUpperCase())if(n=o.getAttribute("href"),t.anchor=o,/^#/.test(n)){if(t.$elm=c.getElementById(n.replace(/#/,"").replace(/\?.*/,""))||!1,!t.$elm)return!1;t.$body.appendChild(t.$elm),t.openModal()}else{t.$elm=c.createElement("div"),t.$elm.style.display="none",t.$body.appendChild(t.$elm);function i(e){return e&&"function"==typeof e.preventDefault&&e.preventDefault(),!(!e.detail||!e.detail.elm||((e=e.detail.elm).parentNode.removeChild(e),0))}t.showSpinner(),o.dispatchEvent(new CustomEvent(p.events.AJAX_SEND));var r=new XMLHttpRequest,d=(new Date).getTime();r.onreadystatechange=function(){var e,t;r.readyState===XMLHttpRequest.DONE&&(200===r.status?p.isActive()&&(t=(new Date).getTime()-d,setTimeout(function(){o.dispatchEvent(new CustomEvent(p.events.AJAX_SUCCESS)),(e=p.getCurrent()).$elm&&(e.$elm.innerHTML=r.responseText,e.$elm.addEventListener(p.events.CLOSE,i)),e.hideSpinner(),e.openModal(),o.dispatchEvent(new CustomEvent(p.events.AJAX_COMPLETE))},450<t?5:650-t)):(o.dispatchEvent(new CustomEvent(p.events.AJAX_FAIL)),(e=p.getCurrent()).hideSpinner(),p.modals.pop(),o.dispatchEvent(new CustomEvent(p.events.AJAX_COMPLETE))))},r.open("GET",n,!0),r.send()}else t.$elm=o,t.anchor=o,t.$body.appendChild(t.$elm),t.openModal()}p.modals=[],p.getCurrent=function(){return p.modals.length?p.modals[p.modals.length-1]:null},p.selectCurrent=function(){for(var e,t=!0,o=p.modals.length-1;0<=o;o--)(e=p.modals[o].$blocker||!1)&&(!t&&/current/.test(e.className||"")?e.className=e.className.replace(/\scurrent/,""):/current/.test(e.className||"")||(e.className+=" current"),t?/behind/.test(e.className||"")&&(e.className=e.className.replace(/\sbehind/,"")):/behind/.test(e.className||"")||(e.className+=" behind"),t=!1)},p.isActive=function(){return 0<p.modals.length},p.close=function(e){if(p.isActive())return e&&e.preventDefault(),(e=p.getCurrent()).closeModal(),e.$elm},p.events={BEFORE_BLOCK:"modal:before-block",BLOCK:"modal:block",BEFORE_OPEN:"modal:before-open",OPEN:"modal:open",BEFORE_CLOSE:"modal:before-close",CLOSE:"modal:close",AFTER_CLOSE:"modal:after-close",AJAX_SEND:"modal:ajax:send",AJAX_SUCCESS:"modal:ajax:success",AJAX_FAIL:"modal:ajax:fail",AJAX_COMPLETE:"modal:ajax:complete"},p.defaultOptions={closeExisting:!0,escapeClose:!0,clickClose:!0,closeText:"Close",modalClass:"rmodal",blockerClass:"rmodal-wrapper",spinnerHtml:'<div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div>',showSpinner:!0,showClose:!0,fadeDuration:450,fadeDelay:.5},p.keydownHander=function(e){var t=p.getCurrent();27===e.which&&t.options&&t.options.escapeClose&&t.closeModal()},p.init=function(e){if(!e||!e.target)return!0;var t=e.target,o=!(!t||!t.nodeType||1!==t.nodeType)&&t.getAttribute("rel");if(!o||!/modal:/.test(o)){for(;t.parentNode&&!t.getAttribute("rel");)t=t.parentNode;if("html"===(t.tagName||"html"))return!0;o=t.getAttribute("rel")||!1}return!o||!/modal:/.test(o)||("function"==typeof e.preventDefault&&e.preventDefault(),"function"==typeof e.stopPropagation&&e.stopPropagation(),"modal:close"===o?(p.close(),!1):"modal:open"===o?(e.preventDefault(),new n(t),!1):void 0)},n.prototype.openModal=function(){var e=this;e.block(),e.anchor.blur(),e.options.doFade?setTimeout(function(){e.showModal()},e.options.fadeDuration*e.options.fadeDelay):e.showModal(),c.removeEventListener("keydown",p.keydownHander),c.addEventListener("keydown",p.keydownHander),e.options.clickClose&&e.$blocker.addEventListener("click",function(e){e=(e||{}).target||!1;!e||e!==this&&e.parentNode!==this||p.close()})},n.prototype.closeModal=function(){p.modals.pop(),this.unblock(),this.hideModal(),p.isActive()||c.removeEventListener("keydown",p.keydownHander)},n.prototype.block=function(){var e=this;e.$elm.dispatchEvent(new CustomEvent(p.events.BEFORE_BLOCK,e.getContext())),e.$body.style.overflow="hidden",e.$blocker=c.createElement("div"),e.$blocker.className=e.options.blockerClass+" blocker current",e.$body.appendChild(e.$blocker),p.selectCurrent(),e.options.doFade&&(e.$blocker.style.opacity=0,e.$blocker.style.transition="opacity "+e.options.fadeDuration+"ms ease-out",setTimeout(function(){e.$blocker.style.opacity=1},10)),e.$elm.dispatchEvent(new CustomEvent(p.events.BLOCK,e.getContext()))},n.prototype.unblock=function(e){var o=this;!e&&o.options.doFade&&o.$blocker&&(o.$blocker.style.opacity=1,o.$blocker.style.transition="opacity "+o.options.fadeDuration+"ms ease-out",setTimeout(function(){o.$blocker.style.opacity=0},10),setTimeout(function(){for(var e=0,t=o.$blocker.childNodes;e<t.length;e++)o.$body.appendChild(t[e]);if(o.$blocker.parentNode.removeChild(o.$blocker),o.$blocker=null,p.selectCurrent(),!p.isActive())try{o.$body.style.removeProperty("overflow")}catch(e){o.$body.style.overflow="inherit"}},10+o.options.fadeDuration))},n.prototype.showModal=function(){var e=this;e.$elm.dispatchEvent(new CustomEvent(p.events.BEFORE_OPEN,e.getContext())),e.options.showClose&&(e.closeButton=c.createElement("a"),e.closeButton.setAttribute("href","#close-modal"),e.closeButton.setAttribute("rel","modal:close"),e.closeButton.setAttribute("class","close-"+e.options.modalClass),e.closeButton.appendChild(c.createElement(e.options.closeText)),e.$elm.append(e.closeButton)),e.$elm.className=(e.$elm.className?e.$elm.className+" ":"")+e.options.modalClass,e.$blocker.appendChild(e.$elm),e.options.doFade?(e.$elm.style.opacity=0,e.$elm.style.display="inline-block",e.$elm.style.transition="opacity "+e.options.fadeDuration+"ms ease-out",setTimeout(function(){e.$elm.style.opacity=1},10)):e.$elm.style.display="inline-block",e.$elm.dispatchEvent(new CustomEvent(p.events.OPEN,e.getContext()))},n.prototype.hideModal=function(){var e=this;if(!e.$elm)return!1;e.$elm.dispatchEvent(new CustomEvent(p.events.BEFORE_CLOSE,e.getContext())),e.closeButton&&e.closeButton.parentNode.removeChild(e.closeButton),e.options.doFade?(e.$elm.style.opacity=1,e.$elm.style.transition="opacity "+e.options.fadeDuration+"ms ease-out",setTimeout(function(){e.$elm.style.opacity=0},10),setTimeout(function(){e.$elm.style.display="none",e.$elm.className=e.$elm.className.replace(new RegExp("\\s*"+e.options.modalClass),""),e.$elm.dispatchEvent(new CustomEvent(p.events.AFTER_CLOSE,e.getContext()))},10+e.options.fadeDuration)):(e.$elm.style.display="none",e.$elm.className=e.$elm.className.replace(new RegExp("\\s*"+e.options.modalClass),""),setTimeout(function(){e.$elm.dispatchEvent(new CustomEvent(p.events.AFTER_CLOSE,e.getContext()))},10)),e.$elm.dispatchEvent(new CustomEvent(p.events.CLOSE,e.getContext()))},n.prototype.showSpinner=function(){var e=this;e.options.showSpinner&&(e.spinner||(e.spinner=c.querySelector("."+e.options.modalClass+"-spinner")||!1),e.spinner||(e.spinner=c.createElement("div"),e.spinner.className=e.options.modalClass+"-spinner",e.spinner.innerHTML=e.options.spinnerHtml,e.$body.appendChild(e.spinner)),e.spinner.style.display="block")},n.prototype.hideSpinner=function(){this.spinner&&(this.spinner.style.display="none")},n.prototype.getContext=function(){var e=this;return{bubbles:!0,detail:{elm:e.$elm,$elm:e.$elm,$blocker:e.$blocker,options:e.options,$anchor:e.anchor}}},c.readyState&&"loading"!==c.readyState?c.addEventListener("click",p.init):c.addEventListener("DOMContentLoaded",function(){c.addEventListener("click",p.init)}),e.jModalInst=p}(window,document);